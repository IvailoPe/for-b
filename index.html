<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Heart Curve</title>
    <style>
      canvas {
        transition: scale 1.3s, transform 3s;
      }

      .scaleUp {
        scale: 1.2;
      }

      .scaleDown {
        scale: 0.7;
      }

      .rotate{
        transform: rotateY(7turn);
      }
    </style>
  </head>
  <body
    style="
      display: flex;
      justify-content: center;
      width: 100vw;
      height: 100vh;
      margin: 0;
      align-items: center;
    "
  >
    <canvas id="heart" width="500" height="500"></canvas>

    <script>
      async function initDraw() {
        const canvas = document.getElementById("heart");
        const ctx = canvas.getContext("2d");

        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.scale(100, -100);

        ctx.beginPath();
        for (let t = 0; t <= 2 * Math.PI; t += 0.01) {
          const x = -Math.sqrt(2) * Math.sin(t) ** 3;
          const y = 2 * Math.cos(t) - Math.cos(t) ** 2 - Math.cos(t) ** 3;

          if (t === 0) {
            ctx.moveTo(x, y);
          } else {
            ctx.lineTo(x, y);
          }

          await new Promise((res) => {
            setTimeout(() => {
              ctx.lineWidth = 0.01;
              ctx.strokeStyle = "red";
              ctx.stroke();
              res();
            }, 10);
          });
        }

        for (let alpha = 0; alpha <= 1; alpha += 0.02) {
          await new Promise((res) => setTimeout(res, 25));
          ctx.save();
          ctx.globalAlpha = alpha;
          ctx.fillStyle = "red";
          ctx.fill();
          ctx.restore();
        }

        await new Promise((res) => {
            setTimeout((res), 1000)

            canvas.classList.add("rotate")
        })

        setInterval(() => {
          if (canvas.classList.contains("scaleUp")) {
            canvas.classList.remove("scaleUp");
            canvas.classList.add("scaleDown");
            return;
          }
          canvas.classList.remove("scaleDown");
          canvas.classList.add("scaleUp");
        }, 1300);
      }
      initDraw().then();
    </script>
  </body>
</html>
